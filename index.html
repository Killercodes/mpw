<!doctype html>
<html lang=en>
<head>
	<meta charset=utf-8>
	<!-- by Tom Thorogood <me@tomthorogood.co.uk> -->
	<!-- This work is licensed under the Creative Commons Attribution
		 4.0 International License. To view a copy of this license,
		 visit http://creativecommons.org/licenses/by/4.0/ or see LICENSE. -->
	<title>Master Password</title>
	<link rel=stylesheet href=style.css>
</head>
<body>
	<header class=page-header>
		<h1>Master Password &ndash; <code>mpw-js</code></h1>
	</header>
	
	<main class=page-body>	
		<div class=user>
			<h2>User</h2>
			
			<p><label>Full name: <input disabled name=fullname required placeholder="John Smith"></label></p>
			
			<p><label>Master Password: <input disabled name=masterpassword required type=password placeholder=Password></label></p>
			
			<p><button disabled name=calculatekey>Calculate key</button></p>
		</div>
		
		<div class=site>
			<h2>Site</h2>
			
			<p><label>Site: <input disabled name=site required placeholder=example.com></label></p>
			
			<!--<p><label>Counter: <input disabled name=counter required type=number min=1 max=4294967295 value=1></label></p>-->
			<p><label>Counter: <input disabled name=counter required type=number min=1 max=2147483647 value=1></label></p>
			
			<p><label>Context: <input disabled name=context></label></p>
			
			<p><label>
				Template:
				<select disabled name=template required>
					<option value=maximum>Maximum</option>
					<option value=long selected>Long</option>
					<option value=medium>Medium</option>
					<option value=basic>Basic</option>
					<option value=short>Short</option>
					<option value=pin>PIN</option>
					<option value=name>Name</option>
					<option value=phrase>Phrase</option>
				</select>
			</label></p>
			
			<p><label>
				Type:
				<select disabled name=type required>
					<option value=login>Username</option>
					<option value=password selected>Password</option>
					<option value=answer>Security Answer</option>
				</select>
			</label></p>
		</div>
		
		<div class=result>
			<h2>Generated <span class=resulttype>Password</span></h2>
			
			<p><label>Password: <input disabled class=password readonly placeholder=Password></label></p>
			
			<p>Error: <code class=error><noscript>You must have JavaScript enabled for this page to work.</noscript></code></p>
		</div>
	</main>
	
	<footer class=page-footer>
		<h2>License</h2>
		
		<pre><a href=https://creativecommons.org/licenses/by/4.0/ rel=license><img alt="Creative Commons Licence" src=https://i.creativecommons.org/l/by/4.0/88x31.png></a>
<span xmlns:dct=http://purl.org/dc/terms/ property=dct:title>mpw-js</span> by <a xmlns:cc=http://creativecommons.org/ns# href=https://tomthorogood.co.uk/ property=cc:attributionName rel=cc:attributionURL>Tom Thorogood</a> is licensed under a <a rel=license href=https://creativecommons.org/licenses/by/4.0/>Creative Commons Attribution 4.0 International License</a>.

mpw-js is a JavaScript + Web Crypto implementation of the Master Password App
algorithm &lt;<a href=http://masterpasswordapp.com/algorithm.html>http://masterpasswordapp.com/algorithm.html</a>&gt;.

mpw-js relies on `js-scrypt`, which is written by Tony Garnock-Jones
&lt;<a href=mailto:tonygarnockjones@gmail.com>tonygarnockjones@gmail.com</a>&gt; and is licensed under the <a href=http://opensource.org/licenses/BSD-2-Clause>2-clause BSD license</a> as follows:

> Copyright &copy; 2013, Tony Garnock-Jones  
> All rights reserved.
>
> Redistribution and use in source and binary forms, with or without
> modification, are permitted provided that the following conditions
> are met:
>
> 1. Redistributions of source code must retain the above copyright
>    notice, this list of conditions and the following disclaimer.
>
> 2. Redistributions in binary form must reproduce the above copyright
>    notice, this list of conditions and the following disclaimer in
>    the documentation and/or other materials provided with the
>    distribution.
>
> THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
> "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
> LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
> FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
> COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
> INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
> BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
> LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
> CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
> LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
> ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
> POSSIBILITY OF SUCH DAMAGE.

js-scrypt relies on `scrypt` itself, which is written by Colin
Percival and licensed as follows:

> Copyright 2009 Colin Percival  
> All rights reserved.
>
> Redistribution and use in source and binary forms, with or without
> modification, are permitted provided that the following conditions
> are met:
>
> 1. Redistributions of source code must retain the above copyright
>    notice, this list of conditions and the following disclaimer.
> 2. Redistributions in binary form must reproduce the above copyright
>    notice, this list of conditions and the following disclaimer in the
>    documentation and/or other materials provided with the distribution.
>
> THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
> ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
> IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
> ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
> FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
> DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
> OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
> HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
> LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
> OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
> SUCH DAMAGE.</pre>
	</footer>
	
	<script>
	// Test for required ES6 features
	// This test must be in an eval call as they are language
	// features and ES5 parsers will hard-fail otherwise
	try {
		// If the ES6 class, let, destructive assignment and rest arguments
		// are supported, this will be successful and ES6 will be set to true
		// and suffix to ".js"
		eval("class $ES6 { constructor() { let b = true; this.b = b; } } const [ES6, esdir] = ((...args) => args)(new $ES6().b, '')");
	} catch (e) {
		// If the needed ES6 features aren't supported, ES6 will be set to false
		// and suffix to ".es5.js"
		var ES6 = false;
		var esdir = "es5/";
	}
	
	// If ES6 is not supported we must include traceur-runtime.js
	ES6 || document.write("<script src=lib/traceur-runtime.js><\/script>");
	
	// If setImmediate is not implemented we include the polyfill
	window.setImmediate || document.write("<script src=" + esdir + "setImmediate-polyfill.js><\/script>");
	
	// If Typed Arrays are not supported we include the polyfill
	// https://github.com/inexorabletash/polyfill
	window.ArrayBuffer || document.write("<script src=typedarray-polyfill.js><\/script>");
	
	// If TextEncoder is not supported we include the polyfill
	// https://github.com/inexorabletash/text-encoding
	window.TextEncoder || document.write("<script src=encoding-polyfill.js><\/script>");
	
	// If Promise is not supported we include the polyfill
	// https://github.com/taylorhakes/promise-polyfill
	window.Promise || document.write("<script src=promise-polyfill.js><\/script>");
	
	// Alias window.crypto.subtle with window.crypto.webkitSubtle if
	// the latter but not the former is supported
	if (!window.crypto.subtle && window.crypto.webkitSubtle) {
		window.crypto.subtle = window.crypto.webkitSubtle;
	}
	
	// If Web Crypto API is not supported we include a JS crypto library
	// https://code.google.com/p/crypto-js/
	if (!window.crypto.subtle) {
		document.write("<script src=https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/hmac-sha256.js><\/script>");
		document.write("<script src=https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/components/lib-typedarrays-min.js><\/script>");
	}
	
	// If your borwser needs a lot of polyfills consider upgrading
	// to a more modern feature rich browser, if you are a browser
	// developer considering adding these much needed features already!
	// :D
	
	// Include the scrypt implementation
	var SCRYPTASM_PATH = (window.location + '').replace(/\/index.html$/i, '/') + "lib/scrypt-asm.js";
	document.write("<script src=lib/" + esdir + "scrypt.js><\/script>");
	
	// Include the MPW class
	document.write("<script src=lib/" + esdir + "mpw.js><\/script>");
	
	// manager.js handles this demo
	document.write("<script src=" + esdir + "manager.js><\/script>");
	</script>
</body>
</html>