{"version":3,"file":"/home/tom/git/mpw-js.gh/es5/manager.js","sources":["/home/tom/git/mpw-js.gh/manager.js","@traceur/generated/TemplateParser/0"],"names":[],"mappings":"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","sourceRoot":"/home/tom/git/mpw-js.gh/es5/","sourcesContent":["/*! by Tom Thorogood <me@tomthorogood.co.uk> */\n/*! This work is licensed under the Creative Commons Attribution 4.0\nInternational License. To view a copy of this license, visit\nhttp://creativecommons.org/licenses/by/4.0/ or see LICENSE. */\n\nlet mpw, fullname, masterpassword, version, sitename, counter, context, template, type, resulttype, password, error, id = 0;\n\nfunction updateMPW() {\n\terror.textContent = password.value = \"\";\n\t\n\tif (!fullname.value ||\n\t\t!masterpassword.value ||\n\t\t!fullname.validity.valid ||\n\t\t!masterpassword.validity.valid ||\n\t    !version.validity.valid) {\n\t\treturn mpw = null;\n\t}\n\t\n\tmpw = new MPW(fullname.value, masterpassword.value, version.valueAsNumber);\n\t\n\tupdatePassword();\n}\n\nfunction updatePassword() {\n\terror.textContent = password.value = \"\";\n\t\n\tif (!mpw || !sitename.value ||\n\t\t!sitename.validity.valid ||\n\t\t!counter.validity.valid ||\n\t\t!template.validity.valid ||\n\t\t!type.validity.valid) {\n\t\treturn;\n\t}\n\t\n\tlet cid = ++id;\n\t\n\tif (type.value === \"answer\") {\n\t\tvar value = mpw.generateAnswer(sitename.value, counter.valueAsNumber, context.value, template.value);\n\t} else {\n\t\tlet Type = type.value[0].toUpperCase() + type.value.slice(1).toLowerCase();\n\t\t\n\t\tvar value = mpw[\"generate\" + Type](sitename.value, counter.valueAsNumber, template.value);\n\t}\n\t\n\tvalue.then(function (pass) {\n\t\tif (cid === id) {\n\t\t\tpassword.value = pass;\n\t\t}\n\t}, function (err) {\n\t\tif (cid === id) {\n\t\t\terror.textContent = err.message;\n\t\t}\n\t\t\n\t\tconsole.error(err);\n\t});\n}\n\nfunction updateType() {\n\tresulttype.textContent = type.selectedOptions[0].textContent;\n\t\n\tcontext.disabled = type.value !== \"answer\";\n\t\n\tswitch (type.value) {\n\t\tcase \"login\":\n\t\t\ttemplate.value = \"name\";\n\t\t\tbreak;\n\t\tcase \"password\":\n\t\t\ttemplate.value = \"long\";\n\t\t\tbreak;\n\t\tcase \"answer\":\n\t\t\ttemplate.value = \"phrase\";\n\t\t\tbreak;\n\t}\n\t\n\tupdatePassword();\n}\n\nwindow.addEventListener(\"load\", function () {\n\tfullname       = document.querySelector(\"[name=fullname]\");\n\tmasterpassword = document.querySelector(\"[name=masterpassword]\");\n\tversion        = document.querySelector(\"[name=version]\");\n\tcalculatekey   = document.querySelector(\"[name=calculatekey]\");\n\tsitename       = document.querySelector(\"[name=site]\");\n\tcounter        = document.querySelector(\"[name=counter]\");\n\tcontext        = document.querySelector(\"[name=context]\");\n\ttemplate       = document.querySelector(\"[name=template]\");\n\ttype           = document.querySelector(\"[name=type]\");\n\tresulttype     = document.querySelector(\".resulttype\");\n\tpassword       = document.querySelector(\".password\");\n\terror          = document.querySelector(\".error\");\n\t\n\tfullname.disabled = masterpassword.disabled = version.disabled = calculatekey.disabled = sitename.disabled = counter.disabled = template.disabled = type.disabled = password.disabled = false;\n\t\n\tupdateMPW();\n\tcalculatekey.addEventListener(\"click\", updateMPW, false);\n\t\n\tsitename.addEventListener(\"input\", updatePassword, false);\n\tcounter.addEventListener(\"input\", updatePassword, false);\n\tcontext.addEventListener(\"input\", updatePassword, false);\n\ttemplate.addEventListener(\"change\", updatePassword, false);\n\ttype.addEventListener(\"change\", updatePassword, false);\n\t\n\tupdateType();\n\ttype.addEventListener(\"change\", updateType, false);\n\t\n\tMPW.test().catch(function (err) {\n\t\tconsole.error(err);\n\t\terror.textContent = err.toString();\n\t});\n}, false);","$__placeholder__0[$traceurRuntime.toProperty($__placeholder__1)]"]}